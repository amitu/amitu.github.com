
<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7 ie" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8 ie" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9 ie" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>Amit Upadhyay: Stupid Mistake Jekyll and GitHub Made (And Solution)</title>
	<meta name="author" content="Amit Upadhyay">
	<link href='/assets/themes/the-program/css/style.css' rel="stylesheet" media="all">
	<link href="http://amitu.com/atom.xml" rel="alternate" title="Stupid Mistake Jekyll and GitHub Made (And Solution)" type="application/atom+xml">
	<script src="http://cdnjs.cloudflare.com/ajax/libs/modernizr/2.0.6/modernizr.min.js"></script>
</head>
<body ng-app>

<div id="page" class="hentry">
	<header class="the-header">
		<div class="unit-head">
			<div class="unit-inner unit-head-inner">
				<nav class="nav-global">
					<ul>
						<li class="logo"><a href="/">Amit Upadhyay</a></li>
						<!-- li class="archive"><a href="/archive.html">archive</a></li -->
						<li class="page"><a href="/">blog</a></li>
						<li class="page"><a href="/open-source.html">open source</a></li>
						<li class="page"><a href="/quotes.html">quotes</a></li>
						<li class="page"><a href="/lab/">experiments</a></li>
						<li class="page"><a href="/india/">India</a></li>
						<!-- li class="page"><a href="/faq.html">faq</a></li -->
						<!-- li class="page"><a href="/pages.html">pages</a></li -->
						<!-- li class="category"><a href="/categories.html">categories</a></li>
						<li class="tag"><a href="/tags.html">tags</a></li>
						<li class="forkme"><div><iframe src="http://markdotto.github.com/github-buttons/github-btn.html?user=plusjade&repo=jekyll-bootstrap&type=fork&count=true"
									allowtransparency="true" frameborder="0" scrolling="0" width="95px" height="20px"></iframe></div></li -->
					</ul>
				</nav>
			</div><!-- unit-inner -->
		</div><!-- unit-head -->
	</header>
	<div class="body" role="main">
		<div class="unit-body">
			<div class="unit-inner unit-body-inner">
				<div class="entry-content">
					
<article class="unit-article layout-post">
	<div class="unit-inner unit-article-inner">
		<div class="content">
			<header>
				<div class="unit-head">
					<div class="unit-inner unit-head-inner">
						<h1 class="h2 entry-title">Stupid Mistake Jekyll and GitHub Made (And Solution)</h1>
					</div><!-- unit-inner -->
				</div><!-- unit-head -->
			</header>

			<div class="bd">
				<div class="entry-content">
					<h4 id='background'>Background</h4>

<p><a href='http://github.com'>Github</a> has an excellent feature called <a href='http://http://pages.github.com/'>pages</a>, that allows one to host and publish static websites from any git repository on github. This is great for projects to host a free project page. Github also allows and encourages github users to host their personal static sites on github pages. They go to the extent of allowing you to host your custom domains (making it almost completely alturistic exercise on their part).</p>

<p>Managing static sites is a pain, and we meet <a href='https://github.com/mojombo/jekyll/'>Jekyll</a>, a static site generator designed with blogs in mind. What jekyll does is it expects some special files and folders with names starting with an underscore, and uses them to convert all files in the current folder with .md (etc) extension into .html files. In folder named _posts, specially named .md files are used to create blog, with categories and tags. Post meta data is stored in the .md files themselves at the top. jekyll creates archive page, a list of all pages on the site, rss and sitemap file and all.</p>

<p>Jekyll takes all the content, applies jekyll rules and plugins and generate a static site and stores it in a folder named _site.</p>

<h4 id='the_mistake'>The Mistake</h4>

<p>Github ignores the _site folder.</p>

<p>Github has jekyll of its own, and it insists on using its copy of jekyll to generate _site, or where-ever they store static files.</p>

<p>Github does it so you do not have to have jekyll installed on your machine, and still be able to publish jekyll sites, so it assumes _site may be out of date.</p>

<h4 id='the_consequence_of_the_mistake'>The Consequence Of The Mistake</h4>

<p>The first problem with this decision is: jekyll plugins. Jekyll comes with a wide range of <a href='https://github.com/mojombo/jekyll/wiki/Plugins'>plugins</a>, but jekyll copy of github wont load most of them.</p>

<p>There are ways to overcome this, instead of storing jekyll in the repository, store the static compiled _site in the repository and tell github that it is not a jekyll repo.</p>

<p>This introduces complexities for developers. I have to now maintain two different repositories or branches, I have to write <a href='http://charliepark.org/jekyll-with-plugins/'>scripts to sync them</a> etc. And it completely defeats the point of supporting jekyll at github level.</p>

<p>If we look at a normal software build, we have Makefile, we have src/*.c etc, and compiled output is stored in some special folder named &#8220;build&#8221; etc. What we have with jekyll is very close to this, but not there.</p>

<h4 id='solution_github_contract'>Solution: Github Contract</h4>

<p>This design decision to incorporate jekyll is bad compromise. I posit that almost no jekyll based repository is maintained by someone without access to jekyll on their local system.</p>

<p>Instead of github trying to take care of that use case (and the use case of cases where a repository can be modified from web), github takes care of a much better use case: site original files and built static sites being stored in the same repo, which is a real pain point <a href='http://stackoverflow.com/questions/6201339/a-clean-system-for-github-pages-with-local-plugins'>faced by people</a>.</p>

<p>Here is my proposed github contract for pages: <em>if a github pages repository contains a folder named _site, the http request to /any-url goes to file /_site/any-url instead of the file /any-url</em>.</p>

<p>If github does that then they can claim they have equal support for not just jekyll but any static site generation system. I can use jekyll with my custom plugins as easily as without them, or as easily as <a href='http://ringce.com/hyde'>hyde</a> or even my own make files that takes index.md and compiles it into _site/index.html.</p>

<p>The solution is completely backward compatible. Github already supports a protocol to indicate that a given repository does not require jekyll processing. Any repository that requires _site feature but still use jekyll can disable github jekyll, and still use local jekyll to create _site folder.</p>

<p>This drastically reduces github jekyll processing and makes life easier for nearly every github pages user, as we do not have to manage two repositories/branches.</p>

<p>Anybody at Github listening? :-)</p>
					<div class="meta">
                    <hr>
						<p class="date-publish">
							Published: 
							<date class="date-pub" title="2012-08-06T00:00:00-07:00" datetime="2012-08-06T00:00:00-07:00" pubdate>
							<span class="month"><abbr>August</abbr></span>
							<span class="day">06</span>
							<span class="year">2012</span>
							</date>
						</p>
                        
                        
					</div><!-- meta -->
				</div><!-- entry-content -->

<figure class="kudo kudoable" data-id="1"> 
    <a class="kudobject">
        <div class="opening">
            <div class="circle">&nbsp;</div>
        </div>
    </a>
    <a href="#kudo" class="count">
        <span class="num">0</span>
        <span class="txt">Kudos</span>
    </a>
</figure>

				<div class="misc-content" style="padding-top: 30px">
                    <p clas="subscribe" style="background: #fcf7ab; padding-left: 10px">

                        <a href="http://twitter.com/amitu">Follow me on twitter: 
                        @amitu</a>.

                    </p>
					<!-- div class="social">
						<ul class="list-linear">
							<li><div class="twitter-tweet"><a href="https://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="amitu" data-lang="en">Tweet</a></div></li>
							<li><div class="twitter-follow"><a href="https://twitter.com/amitu" class="twitter-follow-button" data-show-count="false" data-lang="en"></a></div></li>
						</ul>
					</div -->
					<div class="comment">
					


  <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_developer = 1;
    var disqus_shortname = 'amitu'; // required: replace example with your forum shortname
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




					</div>
				</div><!-- misc-content -->
			</div><!-- bd -->
			<footer class="unit-foot">
				<div class="unit-inner unit-foot-inner">
					<nav class="pagination">
						<ul>
							
							<li class="prev"><a class="internal" rel="prev"  href="/2012/08/about-this-blog" title="View About This Blog">&laquo; About This Blog</a></li>
							
							
							<li class="pipe"> | </li>
							
							
							<li class="next"><a class="internal" rel="next"  href="/2012/08/why-hacker-news-sucks-off-late" title="View Why Hacker News Sucks Off Late">Why Hacker News Sucks Off Late &raquo;</a></li>
							
						</ul>
					</nav>
					<!-- p class="gotop">
						<a href="#page">Back to Top</a>
					</p -->
				</div>
			</footer>

		</div><!-- content -->
	</div><!-- unit-inner -->
</article>


				</div>
			</div><!-- unit-inner -->
		</div><!-- unit-body -->
	</div><!-- body -->
	<footer class="the-footer">
		<div class="unit-foot">
			<div class="unit-inner unit-foot-inner">
				<div class="misc vcard">
					<h4>about</h4>
					<ul>
						<li class="contact"><address><span class="author fn n">Amit Upadhyay</span> - <span class="fn email">blog@amitu.com</span></address></li>
						<li class="github"><a href="http://github.com/amitu/" rel="me">github.com/amitu</a></li>
						<li class="twitter"><a href="http://twitter.com/amitu/" rel="me">twitter.com/amitu</a></li>
                        <!-- li class="linkedin"><a href="http://www.linkedin.com/in/amitu" rel="me">linkedin.com/in/amitu</a></li -->
                        <!-- li class="rss"><a href="http://eepurl.com/pRhOD">subscribe</a> (<a href="/2012/09/i-am-leaving-facebook-why-and-how-you-should-too/">why?</a>)</li -->
					</ul>
				</div><!-- misc -->
				<a class="twitter-timeline" data-border-color="#FFFFFF" data-related="amitu" data-chrome="transparent" href="https://twitter.com/amitu" data-widget-id="357710046458691584">Tweets by @amitu</a>
				<p class="licence">
					Theme: <a href="http://themes.jekyllbootstrap.com/preview/the-program/">the_minimum</a> based on <a href="http://jekyllbootstrap.com/">Jekyll-bootstrap</a>.<br>
					Powered by <a href="https://github.com/mojombo/jekyll">Jekyll</a>.
				</p>
			</div><!-- unit-foot-inner -->
		</div><!-- unit-foot -->
	</footer>
</div><!-- page -->
<script>
	(function(d, s) {
		var js, fjs = d.getElementsByTagName(s)[0], load = function(url, id) {
		if (d.getElementById(id)) {return;}
		js = d.createElement(s); js.src = url; js.id = id;
		fjs.parentNode.insertBefore(js, fjs);
		};
	load('//platform.twitter.com/widgets.js', 'tweetjs');
	}(document, 'script'));
</script>
<script>
/*! A fix for the iOS orientationchange zoom bug.Script by @scottjehl, rebound by @wilto. MIT License.*/
(function(j){var i=j.document;if(!i.querySelectorAll){return}var l=i.querySelectorAll("meta[name=viewport]")[0],a=l&&l.getAttribute("content"),h=a+", maximum-scale=1.0",d=a+", maximum-scale=10.0",g=true,c=j.orientation,k=0;if(!l){return}function f(){l.setAttribute("content",d);g=true}function b(){l.setAttribute("content",h);g=false}function e(m){c=Math.abs(j.orientation);k=Math.abs(m.gamma);if(k>8&&c===0){if(g){b()}}else{if(!g){f()}}}j.addEventListener("orientationchange",f,false);j.addEventListener("deviceorientation",e,false)})(this);
</script>
  
  
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="http://www.parsecdn.com/js/parse-1.2.3.min.js"></script>
  <script src="/kudos/jstorage.js"></script>
  <script src="/kudos/kudos.js"></script>
  <script src="/kudos/parse-kudos.js"></script>
</body>
</html>

